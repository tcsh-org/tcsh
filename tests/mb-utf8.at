# UTF-8 multibyte handling test case.  This file uses the UTF-8 encoding.

AT_BANNER([UTF-8 multibyte])


AT_SETUP([UTF-8 multibyte test])

AT_DATA([input.csh],
[[#!/bin/csh

set CNT=1

while(${CNT} < 10)

	#ああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	#ああああああああああああああああああああああああああああああああああああああああああああああ
	
	@ CNT ++
end

echo "AAA"
]])
# Test both seekable and unseekable input
AT_CHECK([LC_ALL=en_US.UTF-8 tcsh -f input.csh], ,
[AAA
])
AT_CHECK([cat input.csh | LC_ALL=en_US.UTF-8 tcsh -f], ,
[AAA
])
# Test also LC_TYPE mismatch when the input is seekable
AT_CHECK([LC_ALL=C tcsh -f input.csh], ,
[AAA
])
AT_CHECK([LC_ALL=ja_JP.eucjp tcsh -f input.csh], ,
[AAA
])

AT_CLEANUP()
